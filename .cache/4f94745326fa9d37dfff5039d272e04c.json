{"id":"Focm","dependencies":[{"name":"/Users/qianzhaoyan/Desktop/web/unlimit/package.json","includedInParent":true,"mtime":1536479083197},{"name":"/Users/qianzhaoyan/Desktop/web/unlimit/.babelrc","includedInParent":true,"mtime":1536244231444},{"name":"babel-regenerator-runtime","loc":{"line":1,"column":31},"parent":"/Users/qianzhaoyan/Desktop/web/unlimit/src/index.js","resolved":"/Users/qianzhaoyan/Desktop/web/unlimit/node_modules/babel-regenerator-runtime/runtime.js"},{"name":"./InfiniteScreen","loc":{"line":2,"column":27},"parent":"/Users/qianzhaoyan/Desktop/web/unlimit/src/index.js","resolved":"/Users/qianzhaoyan/Desktop/web/unlimit/src/InfiniteScreen.js"},{"name":"./CreateScreen","loc":{"line":3,"column":25},"parent":"/Users/qianzhaoyan/Desktop/web/unlimit/src/index.js","resolved":"/Users/qianzhaoyan/Desktop/web/unlimit/src/CreateScreen.js"}],"generated":{"js":"\"use strict\";var t=require(\"babel-regenerator-runtime\"),e=i(t),n=require(\"./InfiniteScreen\"),o=i(n),r=require(\"./CreateScreen\"),a=i(r);function i(t){return t&&t.__esModule?t:{default:t}}var s=document.body.clientWidth,c=document.body.clientHeight;window.addEventListener(\"load\",function(){var t=document.getElementById(\"canvas\"),e=new a.default(t);e.show(1);var n=new o.default({container:\"canvas\",onProcess:function(t,n){e.setCenterPoint(t+s/2-20,n+c/2-20)},onStart:function(){e.animate()},onStop:function(){e.show(1),e.stopAnimate()},onReady:function(){}});document.getElementById(\"start\").addEventListener(\"touchstart\",function(e){e.stopPropagation(),clearTimeout(r),t.style.transition=\"\",n.start();var o=e.touches[0].pageY;o}),document.body.addEventListener(\"touchend\",function(e){n.stop(),.01,t.style.transition=\"all .5s\",t.style.transform=t.style.transform.replace(/scale\\(.+\\)/,\"scale(1)\"),r=setTimeout(function(){t.style.transition=\"\"},500)}),document.body.addEventListener(\"touchstart\",function(t){t.preventDefault()}),window.addEventListener(\"contextmenu\",function(t){t.preventDefault()});var r=void 0,i=window.screen,s=i.width,c=i.height});","map":{"mappings":[{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":0}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":13}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":17}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":19}},{"source":"index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":27}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":56}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":58}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":60}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":63}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":65}},{"source":"index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":73}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":93}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":95}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":97}},{"source":"index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":100}},{"source":"index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":102}},{"source":"index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":110}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":128}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":130}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":132}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":135}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":144}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":146}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":149}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":156}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":159}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":161}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":172}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":174}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":175}},{"source":"index.js","original":{"line":6,"column":0},"generated":{"line":1,"column":183}},{"source":"index.js","original":{"line":4,"column":0},"generated":{"line":1,"column":186}},{"source":"index.js","name":"screenWidth","original":{"line":4,"column":6},"generated":{"line":1,"column":190}},{"source":"index.js","name":"document","original":{"line":4,"column":20},"generated":{"line":1,"column":192}},{"source":"index.js","name":"body","original":{"line":4,"column":29},"generated":{"line":1,"column":201}},{"source":"index.js","name":"clientWidth","original":{"line":4,"column":34},"generated":{"line":1,"column":206}},{"source":"index.js","name":"screenHeight","original":{"line":5,"column":6},"generated":{"line":1,"column":218}},{"source":"index.js","name":"document","original":{"line":5,"column":21},"generated":{"line":1,"column":220}},{"source":"index.js","name":"body","original":{"line":5,"column":30},"generated":{"line":1,"column":229}},{"source":"index.js","name":"clientHeight","original":{"line":5,"column":35},"generated":{"line":1,"column":234}},{"source":"index.js","name":"window","original":{"line":6,"column":0},"generated":{"line":1,"column":247}},{"source":"index.js","name":"addEventListener","original":{"line":6,"column":7},"generated":{"line":1,"column":254}},{"source":"index.js","original":{"line":6,"column":24},"generated":{"line":1,"column":271}},{"source":"index.js","original":{"line":6,"column":32},"generated":{"line":1,"column":278}},{"source":"index.js","name":"defaultScreenShow","original":{"line":7,"column":10},"generated":{"line":1,"column":289}},{"source":"index.js","name":"canvas","original":{"line":8,"column":10},"generated":{"line":1,"column":293}},{"source":"index.js","name":"document","original":{"line":8,"column":19},"generated":{"line":1,"column":295}},{"source":"index.js","name":"getElementById","original":{"line":8,"column":28},"generated":{"line":1,"column":304}},{"source":"index.js","original":{"line":8,"column":43},"generated":{"line":1,"column":319}},{"source":"index.js","name":"screen","original":{"line":9,"column":10},"generated":{"line":1,"column":329}},{"source":"index.js","original":{"line":9,"column":19},"generated":{"line":1,"column":331}},{"source":"index.js","name":"CreateScreen","original":{"line":9,"column":23},"generated":{"line":1,"column":335}},{"source":"index.js","original":{"line":9,"column":19},"generated":{"line":1,"column":337}},{"source":"index.js","name":"canvas","original":{"line":9,"column":36},"generated":{"line":1,"column":345}},{"source":"index.js","name":"show","original":{"line":11,"column":11},"generated":{"line":1,"column":348}},{"source":"index.js","name":"show","original":{"line":11,"column":11},"generated":{"line":1,"column":350}},{"source":"index.js","original":{"line":7,"column":30},"generated":{"line":1,"column":355}},{"source":"index.js","name":"infinite","original":{"line":13,"column":10},"generated":{"line":1,"column":358}},{"source":"index.js","name":"infinite","original":{"line":13,"column":10},"generated":{"line":1,"column":362}},{"source":"index.js","original":{"line":13,"column":21},"generated":{"line":1,"column":364}},{"source":"index.js","name":"InfiniteScreen","original":{"line":13,"column":25},"generated":{"line":1,"column":368}},{"source":"index.js","original":{"line":13,"column":21},"generated":{"line":1,"column":370}},{"source":"index.js","original":{"line":13,"column":40},"generated":{"line":1,"column":378}},{"source":"index.js","original":{"line":14,"column":19},"generated":{"line":1,"column":379}},{"source":"index.js","original":{"line":14,"column":19},"generated":{"line":1,"column":389}},{"source":"index.js","original":{"line":13,"column":40},"generated":{"line":1,"column":398}},{"source":"index.js","name":"x","original":{"line":15,"column":18},"generated":{"line":1,"column":408}},{"source":"index.js","name":"x","original":{"line":15,"column":18},"generated":{"line":1,"column":417}},{"source":"index.js","name":"y","original":{"line":15,"column":21},"generated":{"line":1,"column":419}},{"source":"index.js","name":"setCenterPoint","original":{"line":16,"column":19},"generated":{"line":1,"column":422}},{"source":"index.js","name":"setCenterPoint","original":{"line":16,"column":19},"generated":{"line":1,"column":424}},{"source":"index.js","name":"x","original":{"line":16,"column":34},"generated":{"line":1,"column":439}},{"source":"index.js","name":"screenWidth","original":{"line":16,"column":39},"generated":{"line":1,"column":441}},{"source":"index.js","original":{"line":16,"column":53},"generated":{"line":1,"column":443}},{"source":"index.js","original":{"line":16,"column":58},"generated":{"line":1,"column":445}},{"source":"index.js","name":"y","original":{"line":16,"column":62},"generated":{"line":1,"column":448}},{"source":"index.js","name":"screenHeight","original":{"line":16,"column":66},"generated":{"line":1,"column":450}},{"source":"index.js","original":{"line":16,"column":81},"generated":{"line":1,"column":452}},{"source":"index.js","original":{"line":16,"column":85},"generated":{"line":1,"column":454}},{"source":"index.js","original":{"line":13,"column":40},"generated":{"line":1,"column":459}},{"source":"index.js","original":{"line":18,"column":18},"generated":{"line":1,"column":467}},{"source":"index.js","name":"animate","original":{"line":19,"column":19},"generated":{"line":1,"column":478}},{"source":"index.js","name":"animate","original":{"line":19,"column":19},"generated":{"line":1,"column":480}},{"source":"index.js","original":{"line":13,"column":40},"generated":{"line":1,"column":491}},{"source":"index.js","original":{"line":21,"column":17},"generated":{"line":1,"column":498}},{"source":"index.js","name":"show","original":{"line":22,"column":19},"generated":{"line":1,"column":509}},{"source":"index.js","name":"show","original":{"line":22,"column":19},"generated":{"line":1,"column":511}},{"source":"index.js","original":{"line":7,"column":30},"generated":{"line":1,"column":516}},{"source":"index.js","name":"stopAnimate","original":{"line":23,"column":19},"generated":{"line":1,"column":519}},{"source":"index.js","name":"stopAnimate","original":{"line":23,"column":19},"generated":{"line":1,"column":521}},{"source":"index.js","original":{"line":13,"column":40},"generated":{"line":1,"column":536}},{"source":"index.js","original":{"line":25,"column":18},"generated":{"line":1,"column":544}},{"source":"index.js","name":"getElementById","original":{"line":29,"column":13},"generated":{"line":1,"column":559}},{"source":"index.js","name":"getElementById","original":{"line":29,"column":13},"generated":{"line":1,"column":568}},{"source":"index.js","original":{"line":29,"column":28},"generated":{"line":1,"column":583}},{"source":"index.js","name":"addEventListener","original":{"line":29,"column":37},"generated":{"line":1,"column":592}},{"source":"index.js","original":{"line":29,"column":54},"generated":{"line":1,"column":609}},{"source":"index.js","name":"btnTouchdown","original":{"line":45,"column":13},"generated":{"line":1,"column":622}},{"source":"index.js","name":"event","original":{"line":45,"column":26},"generated":{"line":1,"column":631}},{"source":"index.js","name":"stopPropagation","original":{"line":46,"column":14},"generated":{"line":1,"column":634}},{"source":"index.js","name":"stopPropagation","original":{"line":46,"column":14},"generated":{"line":1,"column":636}},{"source":"index.js","name":"timer","original":{"line":47,"column":21},"generated":{"line":1,"column":654}},{"source":"index.js","name":"timer","original":{"line":47,"column":21},"generated":{"line":1,"column":667}},{"source":"index.js","name":"style","original":{"line":48,"column":15},"generated":{"line":1,"column":670}},{"source":"index.js","name":"style","original":{"line":48,"column":15},"generated":{"line":1,"column":672}},{"source":"index.js","name":"transition","original":{"line":48,"column":21},"generated":{"line":1,"column":678}},{"source":"index.js","original":{"line":48,"column":34},"generated":{"line":1,"column":689}},{"source":"index.js","name":"start","original":{"line":49,"column":17},"generated":{"line":1,"column":692}},{"source":"index.js","name":"start","original":{"line":49,"column":17},"generated":{"line":1,"column":694}},{"source":"index.js","name":"pageY","original":{"line":51,"column":16},"generated":{"line":1,"column":702}},{"source":"index.js","name":"pageY","original":{"line":51,"column":16},"generated":{"line":1,"column":706}},{"source":"index.js","name":"event","original":{"line":51,"column":26},"generated":{"line":1,"column":708}},{"source":"index.js","name":"touches","original":{"line":51,"column":32},"generated":{"line":1,"column":710}},{"source":"index.js","original":{"line":51,"column":40},"generated":{"line":1,"column":718}},{"source":"index.js","name":"pageY","original":{"line":51,"column":16},"generated":{"line":1,"column":721}},{"source":"index.js","name":"pageY","original":{"line":52,"column":21},"generated":{"line":1,"column":727}},{"source":"index.js","name":"body","original":{"line":31,"column":13},"generated":{"line":1,"column":731}},{"source":"index.js","name":"body","original":{"line":31,"column":13},"generated":{"line":1,"column":740}},{"source":"index.js","name":"addEventListener","original":{"line":31,"column":18},"generated":{"line":1,"column":745}},{"source":"index.js","original":{"line":31,"column":35},"generated":{"line":1,"column":762}},{"source":"index.js","name":"btnTouchend","original":{"line":73,"column":13},"generated":{"line":1,"column":773}},{"source":"index.js","name":"event","original":{"line":73,"column":25},"generated":{"line":1,"column":782}},{"source":"index.js","name":"stop","original":{"line":74,"column":17},"generated":{"line":1,"column":785}},{"source":"index.js","name":"stop","original":{"line":74,"column":17},"generated":{"line":1,"column":787}},{"source":"index.js","original":{"line":75,"column":12},"generated":{"line":1,"column":794}},{"source":"index.js","name":"style","original":{"line":76,"column":15},"generated":{"line":1,"column":798}},{"source":"index.js","name":"style","original":{"line":76,"column":15},"generated":{"line":1,"column":800}},{"source":"index.js","name":"transition","original":{"line":76,"column":21},"generated":{"line":1,"column":806}},{"source":"index.js","original":{"line":76,"column":34},"generated":{"line":1,"column":817}},{"source":"index.js","name":"style","original":{"line":77,"column":15},"generated":{"line":1,"column":827}},{"source":"index.js","name":"style","original":{"line":77,"column":15},"generated":{"line":1,"column":829}},{"source":"index.js","name":"transform","original":{"line":77,"column":21},"generated":{"line":1,"column":835}},{"source":"index.js","name":"canvas","original":{"line":77,"column":33},"generated":{"line":1,"column":845}},{"source":"index.js","name":"style","original":{"line":77,"column":40},"generated":{"line":1,"column":847}},{"source":"index.js","name":"transform","original":{"line":77,"column":46},"generated":{"line":1,"column":853}},{"source":"index.js","name":"replace","original":{"line":77,"column":56},"generated":{"line":1,"column":863}},{"source":"index.js","original":{"line":77,"column":64},"generated":{"line":1,"column":871}},{"source":"index.js","original":{"line":77,"column":79},"generated":{"line":1,"column":885}},{"source":"index.js","name":"setTimeout","original":{"line":79,"column":16},"generated":{"line":1,"column":897}},{"source":"index.js","name":"setTimeout","original":{"line":79,"column":16},"generated":{"line":1,"column":899}},{"source":"index.js","original":{"line":79,"column":27},"generated":{"line":1,"column":910}},{"source":"index.js","name":"style","original":{"line":80,"column":19},"generated":{"line":1,"column":921}},{"source":"index.js","name":"style","original":{"line":80,"column":19},"generated":{"line":1,"column":923}},{"source":"index.js","name":"transition","original":{"line":80,"column":25},"generated":{"line":1,"column":929}},{"source":"index.js","original":{"line":80,"column":38},"generated":{"line":1,"column":940}},{"source":"index.js","original":{"line":81,"column":11},"generated":{"line":1,"column":944}},{"source":"index.js","name":"body","original":{"line":32,"column":13},"generated":{"line":1,"column":951}},{"source":"index.js","name":"body","original":{"line":32,"column":13},"generated":{"line":1,"column":960}},{"source":"index.js","name":"addEventListener","original":{"line":32,"column":18},"generated":{"line":1,"column":965}},{"source":"index.js","original":{"line":32,"column":35},"generated":{"line":1,"column":982}},{"source":"index.js","original":{"line":32,"column":49},"generated":{"line":1,"column":995}},{"source":"index.js","name":"event","original":{"line":32,"column":50},"generated":{"line":1,"column":1004}},{"source":"index.js","name":"preventDefault","original":{"line":33,"column":14},"generated":{"line":1,"column":1007}},{"source":"index.js","name":"preventDefault","original":{"line":33,"column":14},"generated":{"line":1,"column":1009}},{"source":"index.js","name":"addEventListener","original":{"line":36,"column":11},"generated":{"line":1,"column":1028}},{"source":"index.js","name":"addEventListener","original":{"line":36,"column":11},"generated":{"line":1,"column":1035}},{"source":"index.js","original":{"line":36,"column":28},"generated":{"line":1,"column":1052}},{"source":"index.js","original":{"line":36,"column":43},"generated":{"line":1,"column":1066}},{"source":"index.js","name":"e","original":{"line":36,"column":52},"generated":{"line":1,"column":1075}},{"source":"index.js","name":"preventDefault","original":{"line":37,"column":10},"generated":{"line":1,"column":1078}},{"source":"index.js","name":"preventDefault","original":{"line":37,"column":10},"generated":{"line":1,"column":1080}},{"source":"index.js","name":"touchPageY","original":{"line":40,"column":8},"generated":{"line":1,"column":1099}},{"source":"index.js","name":"timer","original":{"line":41,"column":8},"generated":{"line":1,"column":1103}},{"source":"index.js","original":{"line":41,"column":4},"generated":{"line":1,"column":1110}},{"source":"index.js","name":"window","original":{"line":44,"column":57},"generated":{"line":1,"column":1112}},{"source":"index.js","name":"window","original":{"line":44,"column":57},"generated":{"line":1,"column":1114}},{"source":"index.js","name":"screen","original":{"line":44,"column":64},"generated":{"line":1,"column":1121}},{"source":"index.js","name":"screenWidth","original":{"line":44,"column":19},"generated":{"line":1,"column":1128}},{"source":"index.js","name":"width","original":{"line":44,"column":12},"generated":{"line":1,"column":1130}},{"source":"index.js","name":"width","original":{"line":44,"column":12},"generated":{"line":1,"column":1132}},{"source":"index.js","name":"screenHeight","original":{"line":44,"column":40},"generated":{"line":1,"column":1138}},{"source":"index.js","name":"height","original":{"line":44,"column":32},"generated":{"line":1,"column":1140}},{"source":"index.js","name":"height","original":{"line":44,"column":32},"generated":{"line":1,"column":1142}}],"sources":{"index.js":"import regeneratorRuntime from \"babel-regenerator-runtime\";\nimport InfiniteScreen from './InfiniteScreen';\nimport CreateScreen from './CreateScreen';\nconst screenWidth = document.body.clientWidth;\nconst screenHeight = document.body.clientHeight;\nwindow.addEventListener('load', () => {\n    const defaultScreenShow = 1;\n    const canvas = document.getElementById('canvas');\n    const screen = new CreateScreen(canvas);\n    let distanceY = 1;\n    screen.show(defaultScreenShow);\n\n    const infinite = new InfiniteScreen({\n        container: 'canvas',\n        onProcess(x, y) {\n            screen.setCenterPoint(x + (screenWidth / 2) - 20, y + screenHeight / 2 - 20);\n        },\n        onStart() {\n            screen.animate();\n        },\n        onStop() {\n            screen.show(defaultScreenShow);\n            screen.stopAnimate();\n        },\n        onReady() {\n            // infinite.start();\n        }\n    })\n    document.getElementById('start').addEventListener('touchstart', btnTouchdown);\n    // document.body.addEventListener('touchmove', btnTouchmove);\n    document.body.addEventListener('touchend', btnTouchend);\n    document.body.addEventListener('touchstart', (event) => {\n        event.preventDefault();\n    });\n\n    window.addEventListener('contextmenu', function(e){\n        e.preventDefault();\n    });\n    \n    let touchPageY;\n    let timer;\n    let i = 0.01;\n    const minScale = 0.2;\n    const { width: screenWidth, height: screenHeight } = window.screen;\n    function btnTouchdown(event) {\n        event.stopPropagation();\n        clearTimeout(timer);\n        canvas.style.transition = '';\n        infinite.start();\n        // canvas.style.transform += ' scale(.9)'\n        const { pageY } = event.touches[0];\n        touchPageY = pageY;\n    }\n\n    function btnTouchmove(event) {\n        if (!infinite.inService) return false;\n        const { pageY } = event.touches[0];\n        // 缩放比例\n        distanceY = (screenHeight - (touchPageY - pageY)) / screenHeight;\n        distanceY = Number(distanceY.toFixed(3)) * 0.9;\n\n        if (distanceY > minScale) {\n            if (canvas.style.transform.indexOf('scale') > -1) {\n                canvas.style.transform = canvas.style.transform.replace(/scale\\(.+\\)/, `scale(${distanceY})`)\n            } else {\n                canvas.style.transform += ` scale(${distanceY/screenHeight})`\n            }\n            // i = i > 0.4 ? i : i + 0.01;\n            i += 0.01;\n        }\n    }\n\n    function btnTouchend(event) {\n        infinite.stop();\n        i = 0.01;\n        canvas.style.transition = 'all .5s';\n        canvas.style.transform = canvas.style.transform.replace(/scale\\(.+\\)/, 'scale(1)');\n\n        timer = setTimeout(() => {\n            canvas.style.transition = '';\n        }, 500)\n    }\n})\n"},"lineCount":null}},"hash":"3af1619c2005ff4e3937a7fd534983ba","cacheData":{"env":{}}}